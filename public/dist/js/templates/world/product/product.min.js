$(document).on("ready",function(){var a=$("#combos_div").data("combos"),b={},c=$(".b2c-title").data("product");if($('a[data-toggle="tab"]').on("shown.bs.tab",function(a){var d=$(a.target).attr("href").replace("#","");b[d]||"reviews"==d&&Sellyx.ajax.standard({url:Sellyx.path.variable()+"home/"+d,data:"&id="+c,success:function(a){$("#"+d+" .content").children().remove().end().append(a.append),b[d]=!0}})}),$(document).on("click",".filter-button",function(){var b={},c=$(this).parents(".btn-group"),d=c.data("filter"),e=$(this).data("value");if($("#images").data("image-type")&&$("#images").data("image-type")==d){var f=$("#images").data("images")[e];$("#main_product_image").attr("src",f[0].large);var g="";$.each(f,function(a,b){g+='<img class="product-image-strip" large="'+b.large+'" src="'+b.small+'">'}),document.getElementById("product_image_strip").innerHTML=g}b[d]=e,$(this).addClass("selected").siblings(".filter-button").removeClass("selected"),$(".seller-content").hide(),$(".combo-box.selected").removeClass("selected"),$("#combos_filters").find(".btn-group").not(c).each(function(){$this=$(this);var a=$this.find(".filter-button.selected");a.length>0&&(b[$this.data("filter")]=a.data("value"))});var h=Object.keys(b).length;$.each(a,function(a,c){var d=0,e=$('.combo-box[data-combo="'+a+'"]');$.each(b,function(a,b){(c[a].data==b||c[a].converted==b)&&d++}),d==h?e.show():e.hide()}),0==$(".combo-box:visible").length?$(".no-filter-results").show():($(".combo-box:visible:first").trigger("click"),$(".no-filter-results").hide())}).on("click",".seller-content",function(){$(this).find(".seller-details").slideToggle()}).on("click",".combo-box",function(){$(this).addClass("selected").siblings(".combo-box").removeClass("selected"),$(".seller-content").hide(),$('.seller-content[data-combo="'+$(this).data("combo")+'"]').show()}).on("click",".product-image-strip",function(){$("#main_product_image").attr("src",$(this).attr("large"))}).on("click",".add-button",function(a){a.stopImmediatePropagation(),Sellyx.ajax.standard({url:"/world/product/home/add",data:"&listing="+$(this).parents(".seller-content").data("listing")+"&product="+$(".b2c-title").data("product"),button:$(this)})}).on("click",".negotiate-box",function(a){a.stopImmediatePropagation()}).on("click",".negotiate-button",function(a){if(a.stopImmediatePropagation(),$(this).hasClass("open"))return $(this).removeClass("open"),void $(this).nextAll(".negotiate-box").remove();var b='<div class="negotiate-box"><input type="text" class="form-control data-number send validate" placeholder="Quantity" data-var="quantity" /><input type="text" class="form-control data-decimal send validate" placeholder="Price" data-var="price" /><input type="text" class="form-control send validate" placeholder="Offer Expiration" data-var="expiration" data-date-format="dddd, MMMM Do, YYYY, h:mm A" /><textarea  class="form-control send" placeholder="Additional Details (Optional)" data-var="prompt"></textarea><div class="buttons-container"><button class="btn btn-green send-negotiation-button">Send</button></div></div>';$(this).addClass("open"),$(b).insertAfter($(this).nextAll(".add-button")),Sellyx.dtime.datetime($(this).nextAll(".negotiate-box").find('input[data-var="expiration"]'))}).on("click",".send-negotiation-button",function(a){a.stopImmediatePropagation();var b=$(this).parents(".negotiate-box"),c=$(this).parents(".seller-content").find(".negotiate-button");Sellyx.ajax.standard({url:Sellyx.path.variable()+"l_negotiate",button:$(this),container:{divs:b,html:"data-var"},data:"&product="+$(".b2c-header-content").data("product")+"&listing="+b.parents(".seller-content").data("listing"),success:function(){c.prop("disabled",!0).removeClass("open").text("Negotiation Sent"),b.remove()}})}),Sellyx.trigger.handles(),Sellyx.path.parameters("listing")){var d=$('.seller-content[data-listing="'+Sellyx.path.parameters("listing")+'"]');1==d.length&&a[d.data("combo")]?(console.log(a[d.data("combo")]),$.each(a[d.data("combo")],function(a,b){$('.btn-group[data-filter="'+a+'"] .filter-button[data-value="'+(b.converted?b.converted:b.data)+'"]').trigger("click")}),d.addClass("inverted")):$(".btn-group").each(function(){$(this).find(".filter-button:first").trigger("click")})}else $(".btn-group").each(function(){$(this).find(".filter-button:first").trigger("click")})});