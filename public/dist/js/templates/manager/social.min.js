$(document).on("ready",function(){{var a=s_lang.manager_social;$("#affiliateTable").dataTable(Sellyx.dt.init({columns:[{orderable:!1,data:null,defaultContent:'<i class="fa fa-lg fa-plus-circle child-details-control"></i>',"class":"center"},{title:a.tables.active.columns.name,data:"name","class":"center"},{title:a.tables.active.columns.seller,data:"seller.name","class":"center"},{title:a.tables.active.columns.details,data:"type","class":"center",render:function(a,b,c){var d='<span class="s-blue">'+c.value.label+" "+a.label+"</span><br/><label>For Each Customer "+c.method.label+" </label><br/><span>Of "+c.target.label+"</span>";return d+=c.max?"<br/><label>( Per Order Maximum Of "+c.max.label+" )</label>":"<br/><span>No Order Max</span>",d+=c.cap?"<br/><label>( "+c.cap+" Maximum Redeemable Units Per Order )</label>":"<br/><span>No Redeem Limits</span>"}},{title:a.tables.active.columns.code,data:"id","class":"center"},{title:a.tables.active.columns.actions,data:"affiliate.setup.status","class":"center",render:function(a,b,c){var d="<span>"+(1==c.setup.status.id?'<i class="s-d-green fa fa-fw fa-check"></i>':'<i class="s-d-red fa fa-fw fa-ban"></i>')+c.setup.status.label+"</span><br/>";if(1!=c.setup.status.id)return d;if(5==a.id)return d+='<span><i class="s-d-red fa fa-fw fa-ban"></i> '+a.label+"</span>";d+="<br/>";var e={status:a.label,buttons:[],go:[2],pending:[1],id:a.id};return 1==a.id?e.buttons.push('<a class="clickable change-status-button" data-status="3" data-merge="true"><i class="fa fa-minus-circle"></i> Withdraw Request</a>'):2==a.id?e.buttons.push('<a class="clickable change-status-button" data-merge="true" data-status="5"><i class="fa fa-minus-circle"></i> Cancel Affiliation</a>'):3==a.id&&e.buttons.push('<a class="clickable change-status-button" data-merge="true" data-status="1"><i class="fa fa-user"></i> Request Affiliation</a>'),d+Sellyx.dt.actions(e)}}],order:[[2,"desc"]],ajax:"offers"}))}$(document).on("click",".child-details-control , #affiliateTable tbody > tr.odd , #affiliateTable tbody > tr.even",function(a){a.stopImmediatePropagation();var b=Sellyx.row.data($(this)),c=b.data,d='<div style="text-align:center;margin-top:10px;"><span>'+c.description+"</span></div><br />";switch(d+='<div class="col-sm-6"><h6><i class="fa fa-shopping-cart"></i> Customer</h6><br /><div style="color:#FFF;margin-bottom:20px;width:100%;text-align:center;"><div style="text-align:center;min-width:100px;display:inline-block;width:100%" class="padded btn-d-blue" ><label>Customer Redemption Code</label><br /><span style="font-size:18px;">'+c.affiliate.code+"</span></div></div>"+(1==c.method.id?'<div style="text-align:center;"><label>Since this offer requires a purchase, customers must enter the code above during checkout for you to receive credit for this offer.'+(1==c.customer.type.id?" <b>Please note that this is necessary even though the customer will receive no incentive for doing so.</b>":"")+"</label></div>":""),d+="<span>"+(1!=c.customer.type.id?'<h6 style="margin-bottom:10px;">Per Order</h6><i class="s-blue fa fa-fw fa-thumbs-up"></i> <label>[Total w/o Shipping]</label> '+c.customer.value.label+" ":"<br/>")+c.customer.type.label+"</span><br/>"+(c.customer.min?'<span><i class="s-d-green fa fa-fw fa-minus-circle"></i> <label>Minimum</label> '+c.customer.min.label+"</span><br/>":"")+(c.customer.max?'<span><i class="s-d-red fa fa-fw fa-plus-circle"></i> <label>Maximum</label> '+c.customer.max.label+"</span><br/>":""),d+='</div><div class="col-sm-6"><h6><i class="fa fa-user"></i> Affiliation</h6><br />',c.affiliate.setup.status.id){case 0:break;case 1:d+="<label>Affiliation Requested</label><br /><span>"+c.affiliate.setup.added.label+"</span>";break;case 3:d+="<label>Request Withdrawn</label><br /><span>"+c.affiliate.setup.withdrawn.label+"</span>";break;case 4:d+="<label>Request Denied</label><br /><span>"+c.affiliate.setup.denied.label+"</span>";break;case 2:case 5:case 6:var e="<label>Affiliate Since</label><br /><span> "+c.affiliate.setup.approved.label+"</span><br />"+(c.affiliate.setup.cancelled?"<label>Affiliation Cancelled</label><br /><span>"+c.affiliate.setup.cancelled.label+"</span>":"");2==c.affiliate.setup.status.id&&(e+='<h6 style="margin-bottom:10px;">Prepared Link(s)</h6><p>Copy and paste these links into your social media, including Instagram, Facebook and other social media. We suggest you use <a href="http://www.bitly.com">Bitly</a> to format your links to make them shorter. <b>Soon we will be including a tool to help you produce ready-made images for insertion into different social media pages.</b></p><p>'+(2==c.method.id?"When users click on the links, you will receive upticks in your counters.":"Make sure that your posts mention that your customers have to both purchase the items shown in the links, and input your customer redemption code during checkout. You will then receive upticks in your counters.")+"</p>",c.affiliate.items?$.each(c.affiliate.items,function(a,b){e+='<a href="/common/get/offer?&offer='+c.affiliate.code+"&listing="+b.listing+'" target="_blank">Link</a> '}):e+='<a href="/common/get/offer?&offer='+c.affiliate.code+'" target="_blank">Link</a>'),d+=c.affiliate.code||c.affiliate.setup.cancelled?'<div style="color:#FFF;margin-bottom:20px;width:100%;text-align:center;"><div style="text-align:center;min-width:75%;display:inline-block;" class="padded btn-d-black" ><label>Your Redemption Code</label><br /><span style="font-size:18px;">'+c.id+'</span></div><div class="btn-aqua padded" style="text-align:center;min-width:25%;display:inline-block;"><label>Redeemed</label><br /><span style="font-size:18px;">'+c.affiliate.counters.redeemed+"/"+c.affiliate.counters.total+"</span></div></div>"+e:e+'<div class="col-sm-6 col-md-4"><span>Please generate a code for your customers to use during checkout. All codes will be appended with a -U and a number.</span><br/ ><br /><input class="form-control send validate" data-var="code" /><div class="buttons-container"><button class="btn btn-green submit-code-button">Activate</button></div></div>'}Sellyx.dt.child({all:b,ins:d})}).on("click",".submit-code-button",function(b){b.stopImmediatePropagation();var c=Sellyx.row.data($(this));Sellyx.ajax.standard({url:"code",button:$(this),data:"&id="+c.data.id,lang:a.ajax.code,container:{divs:$(this).parents(".col-sm-6"),html:"data-var"},update:{row:c.row,child:!0}})})});