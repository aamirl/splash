$(document).on("ready",function(){{var a=s_lang.manager_seller_social;$("#offerTable").dataTable(Sellyx.dt.init({columns:[{orderable:!1,data:null,defaultContent:'<i class="fa fa-lg fa-plus-circle child-details-control"></i>',"class":"center"},{title:a.tables.active.columns.id,data:"id","class":"center"},{title:a.tables.active.columns.name,data:"name","class":"center"},{title:a.tables.active.columns.added,data:"setup.added.label","class":"center"},{title:a.tables.active.columns.details,data:"type","class":"center",render:function(a,b,c){var d='<span class="s-blue">'+c.value.label+" "+a.label+"</span><br/><label>For Each Customer "+c.method.label+" </label><br/><span>Of "+c.target.label+"</span>";return d+=c.max?"<br/><label>( Per Order Maximum Of "+c.max.label+" )</label>":"<br/><span>No Order Max</span>",d+=c.cap?"<br/><label>( "+c.cap+" Maximum Redeemable Units Per Order )</label>":"<br/><span>No Redeem Limits</span>"}},{title:a.tables.active.columns.actions,data:"setup.status","class":"center",render:function(a){var b={status:a.label,buttons:[],go:[1],id:a.id};return 1==a.id?b.buttons.push('<a class="clickable change-status-button" data-status="2" data-merge="true"><i class="fa fa-minus-circle"></i> Deactivate Offer</a>'):2==a.id&&b.buttons.push('<a class="clickable change-status-button" data-merge="true" data-status="1"><i class="fa fa-minus-circle"></i> Activate Offer</a>'),Sellyx.dt.actions(b)}}],order:[[2,"desc"]],ajax:"offers"}))}$(document).on("click",".add-button",function(){$("#offerModal").modal("show")}).on("change",'select[data-var="target"]',function(){switch($(".trigger-target").hide().find(".form-control").removeClass("send validate"),$(this).val()){case"2":$('select[data-var="items"]').addClass("send validate").parents(".form-group").show();break;case"3":$('select[data-var="categories"]').addClass("send validate").parents(".form-group").show()}}).on("change",'select[data-var="type"]',function(){switch($(".trigger-type").hide().find(".form-control").removeClass("send validate"),$(this).val()){case"1":$(".trigger-type").show().find(".form-control").addClass("send");break;case"3":$('input[data-var="cap"]').addClass("send").parents(".form-group").show()}}).on("change",'select[data-var="customer.type"]',function(){$(".trigger-i_type").hide().find(".form-control").removeClass("send validate"),1!=$(this).val()&&($('input[data-var="customer.value"]').addClass("send validate").parents(".form-group").show(),$('input[data-var="customer.cap"] , input[data-var="customer.limit"]').addClass("send").parents(".form-group").show())}).on("click","#offerModal .add-offer-button",function(){Sellyx.ajax.standard({url:"add",button:$(this),lang:a.ajax.add,container:{divs:$("#offerModal"),html:"data-var"},add:{table:$("#offerTable")}})}).on("click",".child-details-control , #offerTable tbody > tr.odd , #offerTable tbody > tr.even",function(a){a.stopImmediatePropagation();var b=Sellyx.row.data($(this)),c=b.data,d='<div style="text-align:center;margin-top:10px;"><span>'+c.description+"</span></div><br />";d+='<div class="col-sm-12"><h6><i class="fa fa-user"></i> Customer Incentive (Per Order)</h6><span>'+(1!=c.customer.type.id?'<br/><i class="s-blue fa fa-fw fa-thumbs-up"></i> <label>[Total w/o Shipping]</label> '+c.customer.value.label+" ":"<br/>")+c.customer.type.label+"</span><br/>"+(c.customer.min?'<span><i class="s-d-green fa fa-fw fa-minus-circle"></i> <label>Minimum</label> '+c.customer.min.label+"</span><br/>":"")+(c.customer.max?'<span><i class="s-d-red fa fa-fw fa-plus-circle"></i> <label>Maximum</label> '+c.customer.max.label+"</span><br/>":""),d+='</div><div class="col-sm-12"><h6 style="margin-top:20px;margin-bottom:10px;"><i class="fa fa-users"></i> Affiliates</h6>',c.affiliates.length>0?$.each(c.affiliates,function(a,b){switch(d+='<div class="col-sm-6 col-md-4 affiliate-box"><div style="padding:10px;margin-bottom:5px; '+(2==b.setup.status.id?'" class="btn-d-green':-1!=$.inArray(b.setup.status.id,[3,4,5,6])?'" class="btn-d-red':"border:1px solid #DDD")+'"><h6><a href="/world/user/'+b.user.id+'" target="_blank" onclick="event.stopImmediatePropagation();">'+b.user.name+'</a></h6><span style="font-size:8px;">'+b.setup.status.label+"</span></div>",b.setup.status.id){case 1:d+='<span class="s-gray">Requested</span><br /><span>'+b.setup.added.label+"</span><br />"+(b.message?"<span>"+b.message+"</span>":"")+'<div class="buttons-container"><div><button class="change-status-button btn fw btn-green" data-status="2" data-extra="'+b.user.id+'" data-method="affiliate"><i class="fa fa-check"></i> Approve Request</button><br /><button class="clickable btn-red btn fw change-status-button" data-status="4" data-method="affiliate" data-extra="'+b.user.id+'"><i class="fa fa-close"></i> Deny Request</button></div></div>';break;case 2:d+='<div class="pull-right" style="text-align:right;"><span>Total</span><br /><span class="s-aqua" style="font-size:18px;">'+b.counters.total+"</span><br /><span>Redeemed</span><br /><span>( "+b.counters.redeemed+' )</span></div><span class="s-gray">Requested</span><br /><span>'+b.setup.added.label+'</span><br /><span class="s-gray">Approved</span><br /><span>'+b.setup.approved.label+'</span><div class="buttons-container"><div><button class="btn-d-red change-status-button btn fw" data-method="affiliate" data-status="6" data-extra="'+b.user.id+'"><i class="fa fa-close"></i> Cancel Affiliate Membership</button></div></div>';break;case 3:d+='<span class="s-gray">Requested</span><br /><span>'+b.setup.added.label+'</span><br /><span class="s-gray">Withdrew</span><br /><span>'+b.setup.withdrawn.label+"</span><br />"+(b.message?"<span>"+b.message+"</span>":"");break;case 4:d+='<span class="s-gray">Requested</span><br /><span>'+b.setup.added.label+'</span><br /><span class="s-gray">Denied</span><br /><span>'+b.setup.denied.label+"</span><br />"+(b.message?"<span>"+b.message+"</span>":"");break;case 5:case 6:d+='<div class="pull-right" style="text-align:right;"><span>Total</span><br /><span class="s-aqua" style="font-size:18px;">'+b.counters.total+"</span><br /><span>Redeemed</span><br /><span>( "+b.counters.redeemed+' )</span></div><span class="s-gray">Requested</span><br /><span>'+b.setup.added.label+'</span><br /><span class="s-gray">Approved</span><br /><span>'+b.setup.approved.label+'</span><br /><span class="s-gray">Cancelled</span><br /><span>'+b.setup.cancelled.label+"</span>"}d+="</div>"}):d+="<span>No Affiliates</span>",Sellyx.dt.child({all:b,ins:d+"</div>"})})});