$(document).on("ready",function(){{var a,b=s_lang.manager_seller_orders;$("#activeTable").dataTable(Sellyx.dt.init({columns:[{orderable:!1,data:null,defaultContent:'<i class="fa fa-lg fa-plus-circle child-details-control"></i>',"class":"center"},{title:b.tables.active.columns.placed,data:"setup.added","class":"center"},{title:b.tables.active.columns.user,data:"user","class":"center",render:function(a){return'<a href="/world/user/'+a.id+'" target="_blank" onclick="event.stopImmediatePropagation()">'+a.name+"</a>"}},{title:b.tables.active.columns.total,data:"total","class":"center",render:function(a){return'<b class="btn-d-red" style="border:1px solid #ddd;padding:5px;font-size:11px;color:#FFF;">'+a+"</b>"}},{title:b.tables.active.columns.actions,data:"setup.status","class":"center",render:function(a,b,c){var d="<span>"+a.label+"</span>";return c.attention&&(d+='<span class="btn-d-red s-white" style="padding:10px;margin-top:10px;display:block;color:#FFF;">NEEDS SHIPPING</span>'),d}},{title:b.tables.active.columns.id,data:"id","class":"center"}],ajax:"active"}))}$(document).on("click","#activeTable tbody > tr.odd , #activeTable tbody > tr.even",function(b){b.stopImmediatePropagation();var c=Sellyx.row.data($(this));a=c;var d=c.data,e='<table class="child-table" cellpadding="5" cellspacing="0" border="0" style="width:100%;"><thead><tr style="background-color:darkcyan;"><td>Items</td><td>Service</td><td>Status</td></tr></thead><tbody>',f={"n-processing":[],"dn-processing":[],"c-processing":[]};$.each(d.items,function(a,b){return"sellyx-1"==b.shipping.responsibility||"sellyx-2"==b.shipping.responsibility&&!b.shipping.rate||b.shipping.service.tracking?void f["dn-processing"].push(b):b.shipping.type?void f["c-processing"].push(b):void f["n-processing"].push(b)});var g=!1;$.each(f,function(a,b){if(0!=b.length){var c="n-processing"==a?!1:!0,f={1:"",2:"",3:""};$.each(b,function(b,h){if(c?f={1:"",2:"",3:""}:null,f[1]+='<div style="margin-bottom:5px;" class="listing-item" data-listing="'+h.listing+'"><b class="btn-d-white" style="padding:0.5px 4.5px;background-color:#1b1b1b;color:#FFF;border-radius:10px;">'+h.quantity+'</b> <a href="/world/product/'+h.item.id+"?&listing="+h.listing+'" target="_blank" onclick="event.stopImmediatePropagation()">'+h.item.name+"</a><br /><br/><label>Listing</label><span> "+h.listing+"</span>"+(h.promotions.length>0?"<br /><br /><label>Applied Promotions</label><br /><span>"+h.promotions.join(", ")+"</span>":"")+'<div><br /><a class="clickable see-more-div">See Item Totals</a><div style="display:none;" class="form-horizontal">'+Sellyx.factory.quick().displays({data:h.totals,l:5,v:7})+"</div></div></div>","n-processing"!=a||!g){"n-processing"==a&&(g=!0),f[2]="<span>"+h.shipping.service.service.label+'</span><span class="s-d-aqua"> '+(h.shipping.service.rate?h.shipping.service.rate:"")+"</span><br /><span>"+h.shipping.service.packaging.label+"</span>"+(h.shipping.type?"":"<br /><label>Grouped Rate</label>")+(h.shipping.service.tracking?'<br /><br /><div class="tracking-div"><label>Tracking</label><br /><span> '+h.shipping.service.tracking.id+"</span></br>"+(h.shipping.service.tracking.courier?"<span>"+h.shipping.service.tracking.courier+"</span><br />":"")+"<span>"+h.shipping.service.tracking.added+"</span></div>":""),!h.shipping.service.tracking&&h.shipping.service.rate?f[3]+='<span style="color:tomato;">URGENT</span><br />':"sellyx-1"==h.shipping.responsibility?f[3]+='<img src="/dist/css/img/sellyxfulfillment_small.png" style="max-width:150px;"></img><br />':"sellyx-2"==h.shipping.responsibility&&(f[3]+='<img src="/dist/css/img/sellyxship_small.png" style="max-width:150px;"></img><br />'),f[3]+="<span>"+h.status.label+"</span>";var i='<div class="process-div"><span>Please ensure that all the items listed are included in the packaging, along with a packing list, which can be printed using the Packing List button.</span><br /><br /><span>'+(h.shipping.type?"Since you set the rates for this shipment, please enter both the courier used to ship the item along with the tracking number that can be used to track the shipment.":"You used <b>"+h.shipping.service.service.label+"</b> to ship these item(s). Enter the tracking number for the carrier and service used to send the shipment.")+'</span><span> Note that all tracking numbers will be confirmed and payment may be delayed if this information is incorrect or incomplete.</span><br /><br /><input class="form-control send validate" placeholder="Item Tracking" data-var="tracking" /><br />'+(h.shipping.type?'<input class="form-control send validate" placeholder="Courier Used" data-var="courier" /><br />':"")+(2==d.gift?'<div class="btn-creme s-d-black" style="padding:10px;"><i class="fa fa-gift fa-lg s-red"></i><span> This is a gift, please do not include prices on any order items.</span></div><br /><br />':"")+'<div style="text-align:center;"><button class="confirm-shipment" '+(h.shipping.type?'data-type="'+h.listing+'"':"")+' style="color:#1b1b1b;">Confirm Shipment</button><button class="cancel" style="color:#1b1b1b;">Cancel</button></div></div>';!h.shipping.service.tracking&&h.shipping.service.rate?f[3]+="<br /><br /><label>Process In</label><br /><span>"+h.process_time+'</span><br /><div><a class="see-more-div clickable">See Address</a><div style="display:none;" class="form-horizontal no-bottom">'+Sellyx.factory.quick().displays({data:d.address,l:5,v:7})+'</div></div><br /><button class="process-order" style="color:#1b1b1b;">Confirm Order Shipped</button>'+i:"",c&&(e+='<tr class="order-process-row '+a+" "+("dn-processing"!=a?"row-error":"")+'">',$.each(f,function(a,b){e+='<td style="'+(3==a?"max-width:600px":"")+'">'+b+"</td>"}),e+="</tr>")}}),c||(e+='<tr class="order-process-row '+a+" "+("dn-processing"!=a?"row-error":"")+'">',$.each(f,function(a,b){e+='<td style="'+(3==a?"max-width:600px":"")+'">'+b+"</td>"}),e+="</tr>")}}),Sellyx.dt.child({all:c,ins:e+"</table>"})}).on("click",".process-order",function(a){a.stopImmediatePropagation(),$(this).next(".process-div").slideToggle(),$(this).slideToggle()}).on("click",".cancel",function(a){a.stopImmediatePropagation(),$(this).parents(".process-div").slideToggle(),$(this).parents(".process-div").prev(".process-order").slideToggle()}).on("click",".confirm-shipment",function(){var c=$(this).parents(".order-process-row");if($(this).data("type"))var d="&type="+$(this).data("type");else{var d=[];c.find(".listing-item").each(function(){d.push($(this).data("listing"))}),d="&listings="+d.join(",")}Sellyx.ajax.standard({url:"confirm",button:$(this),lang:b.ajax.confirm,container:{divs:c.find(".process-div"),html:"data-var"},data:"&id="+a.data.id+d,update:{child:!0,row:a.row}})})});